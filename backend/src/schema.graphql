type Query {
  currentWeather(lat: Float!, lon: Float!): WeatherConditions
  forecast(lat: Float!, lon: Float!): [ForecastPeriod!]!
  alerts(state: String!): [Alert!]!
  mergedAlerts(state: String!): [MergedAlert!]!
  radarInfo: RadarInfo!
  observationStations: [ObservationStation!]!
  historicalData(lat: Float!, lng: Float!): HistoricalData!

  # Historical data queries (from database)
  weatherHistory(stationId: String, startDate: String!, endDate: String!, limit: Int): [WeatherObservation!]!
  alertHistory(eventType: String, startDate: String!, endDate: String!, limit: Int): [HistoricalAlert!]!
  incidentHistory(type: String, startDate: String!, endDate: String!, limit: Int): [HistoricalIncident!]!
  gaugeHistory(siteCode: String!, startDate: String!, endDate: String!, limit: Int): [GaugeReading!]!
  dailyWeatherStats(stationId: String, date: String!): DailyWeatherStats
}

type WeatherConditions {
  temperature: Float
  temperatureUnit: String!
  description: String!
  windSpeed: String
  windDirection: String
  humidity: Float
  timestamp: String!
  stationName: String
  icon: String
}

type ForecastPeriod {
  name: String!
  temperature: Float!
  temperatureUnit: String!
  shortForecast: String!
  detailedForecast: String!
  startTime: String!
  endTime: String!
  isDaytime: Boolean!
  icon: String
  windSpeed: String
  windDirection: String
}

type Alert {
  id: String!
  event: String!
  headline: String
  severity: String!
  certainty: String!
  urgency: String!
  description: String!
  instruction: String
  areaDesc: String!
  effective: String!
  expires: String!
  geometry: AlertGeometry
}

type AlertGeometry {
  type: String!
  coordinates: [[[[Float!]!]!]!]
}

type MergedAlert {
  id: String!
  event: String!
  headline: String
  severity: String!
  certainty: String!
  urgency: String!
  description: String!
  instruction: String
  areaDesc: String!
  effective: String!
  expires: String!
  geometry: MergedAlertGeometry!
  mergedFrom: [String!]!
  affectedZoneIds: [String!]!
}

type MergedAlertGeometry {
  type: String!
  coordinates: [[[[Float!]!]!]!]!
}

type RadarInfo {
  baseUrl: String!
  timestamps: [RadarTimestamp!]!
  tilePattern: String!
}

type RadarTimestamp {
  time: String!
  path: String!
}

type ObservationStation {
  id: String!
  name: String!
  location: Location!
  elevation: Int
  weather: StationWeather!
}

type Location {
  lat: Float!
  lng: Float!
}

type StationWeather {
  temperature: Float!
  temperatureUnit: String!
  description: String!
  windSpeed: String
  windDirection: String
  humidity: Float
  dewpoint: Float
  pressure: Int
  timestamp: String!
}

type HistoricalData {
  weather: [WeatherDay!]!
  stationName: String!
  stationDistance: Float!
}

type WeatherDay {
  date: String!
  tempMin: Float
  tempMax: Float
  precipitation: Float
  snowfall: Float
}

# Historical data types (from database)

type WeatherObservation {
  stationId: String!
  stationName: String!
  observedAt: String!
  temperatureF: Float
  humidity: Float
  windSpeedMph: Float
  windDirection: String
  pressureMb: Int
  description: String
}

type HistoricalAlert {
  id: String!
  noaaAlertId: String!
  eventType: String!
  severity: String!
  certainty: String!
  urgency: String!
  headline: String
  areaDesc: String
  effectiveAt: String!
  expiresAt: String!
  firstSeenAt: String!
  affectedZones: [String!]
}

type HistoricalIncident {
  id: String!
  sourceId: String!
  incidentType: String!
  severity: String!
  title: String!
  description: String
  latitude: Float!
  longitude: Float!
  roadName: String
  firstSeenAt: String!
  resolvedAt: String
}

type GaugeReading {
  siteCode: String!
  siteName: String!
  observedAt: String!
  gageHeightFt: Float!
  latitude: Float!
  longitude: Float!
}

type DailyWeatherStats {
  date: String!
  stationId: String
  avgTemperature: Float
  minTemperature: Float
  maxTemperature: Float
  avgHumidity: Float
  totalReadings: Int!
}
